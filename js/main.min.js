(function(){function k(b){b.preventDefault();var g=document.getElementById("addressDetails");g.style.display="none";var a=b.currentTarget;b=a.getAttribute("data-address");var l=a.getAttribute("data-street-number"),m=a.getAttribute("data-street-name"),h=a.getAttribute("data-ward"),a=a.getAttribute("data-poll");document.getElementById("addressDetails--address").innerText=b;document.getElementById("addressDetails--ward").innerText=h;document.getElementById("addressDetails--poll").innerText=a;var d=document.getElementById("votingLocations--electionDay");
d.innerHTML='<li class="list-group-item">Loading... <i class="fas fa-spinner fa-spin"></i></li>';var f=document.getElementById("votingLocations--advanced");f.innerHTML='<li class="list-group-item">Loading... <i class="fas fa-spinner fa-spin"></i></li>';$.get("voterView.asp",{method:"find_voting_locations",streetNumber:l,streetName:m},"json").done(function(a){f.innerHTML="";0===a.length?d.innerHTML='<li class="list-group-item list-group-item-warning">No voting location found.</li>':(d.innerHTML="",
a.forEach(function(a){var b='<li class="list-group-item"><div class="row">'+('<div class="col-sm">'+a.DateOpenStringLocal+"<br />"+a.StartTime+" to "+a.EndTime+"</div>")+('<div class="col-sm">'+a.LocationName+"<br />"+a.Address1+"</div>")+"</div></li>";a.IsAdvancePoll?f.insertAdjacentHTML("beforeend",b):d.insertAdjacentHTML("beforeend",b)}))});var c=document.getElementById("candidateList--listGroups");c.innerHTML='<p>Loading... <i class="fas fa-spinner fa-spin"></i></p>';var e=function(a,b){return a+
'<li class="list-group-item">'+b.CandidateName+"</li>"};$.get("voterView.asp",{method:"candidate_list",ward:h},"json").done(function(a){c.innerHTML=a.Positions.reduce(function(a,b){return a+"<h4>"+b.PositionName+'</h4><ul class="list-group">'+b.Candidates.reduce(e,"")+"</ul>"},"")});g.style.display="block"}function c(){var b=document.getElementById("addressResults"),c=e.value;0===c.length?b.innerHTML='<div class="list-group-item list-group-item-info">To get started, enter your address.</div>':$.get("voterView.asp",
{method:"street_addresses",query:c},"json").done(function(a){if(0===a.length)b.innerHTML='<div class="list-group-item list-group-item-danger">There are no addresses available.</div>';else{b.innerHTML=a.reduce(function(a,b){return a+'<button class="list-group-item list-group-item-action" data-address="'+b.Address+'" data-street-number="'+b.StreetNumber+'" data-street-name="'+b.StreetName+'" data-ward="'+b.Ward+'" data-poll="'+b.PollAndSuffix+'" type="button"><div class="clearfix"><strong class="float-left">'+
b.Address+"</strong>"+('<small class="float-right text-right">Ward '+b.Ward+"<br />Poll "+b.PollAndSuffix+"</small>")+"</div></button>"},"");a=b.getElementsByTagName("button");var c;for(c=0;c<a.length;c+=1)a[c].addEventListener("click",k)}}).fail(function(){window.alert("An error occurred communicating with VoterView.  Please refresh your browser and try again.")})}var e=document.getElementById("addressForm--query");e.addEventListener("keyup",function(b){b.preventDefault();c()});c()})();
